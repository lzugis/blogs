import{_ as s,o as a,c as n,O as l}from"./chunks/framework.ec4390fa.js";const o="/lzugis-blogs/img/extend/1.png",p="/lzugis-blogs/img/extend/2.png",d=JSON.parse('{"title":"等值面生成","description":"","frontmatter":{},"headers":[],"relativePath":"geotools/equisurface.md","filePath":"geotools/equisurface.md"}'),e={name:"geotools/equisurface.md"},t=l(`<h1 id="等值面生成" tabindex="-1">等值面生成 <a class="header-anchor" href="#等值面生成" aria-label="Permalink to &quot;等值面生成&quot;">​</a></h1><h2 id="一、wcontour简介" tabindex="-1">一、<a href="http://meteothink.org/products/wcontour.html" target="_blank" rel="noreferrer">wcontour简介</a> <a class="header-anchor" href="#一、wcontour简介" aria-label="Permalink to &quot;一、[wcontour简介](http://meteothink.org/products/wcontour.html)&quot;">​</a></h2><p><code>wContour</code>类库是使用 Java 和 C# 开发的，用于在使用 Java 或 .NET 环境的地球科学数据分析软件开发中使用等高线相关算法。对具有大量不规则分布的未定义值点的复杂网格数据的等高线追踪、填充和裁剪算法进行了全面的描述。从头开始描绘边界线，最后输出带孔的轮廓多边形。为网格数据的离散数据插值提供了<code>反距离加权 (IDW) </code>和<code> Cressman 客观分析方法</code>。包括轮廓线跟踪、平滑、填充和裁剪算法，以实现复杂网格数据的轮廓功能。还提供了流线分析方法。</p><h2 id="二、实现" tabindex="-1">二、实现 <a class="header-anchor" href="#二、实现" aria-label="Permalink to &quot;二、实现&quot;">​</a></h2><h3 id="_1-训练数据" tabindex="-1">1. 训练数据 <a class="header-anchor" href="#_1-训练数据" aria-label="Permalink to &quot;1. 训练数据&quot;">​</a></h3><p>数据格式为csv的全国的3000多个气象站的温度数据，格式如下：</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">121.474042,30.917795,22</span></span>
<span class="line"><span style="color:#A6ACCD;">109.879153,31.074834,18</span></span>
<span class="line"><span style="color:#A6ACCD;">106.551541,29.563121,27</span></span>
<span class="line"><span style="color:#A6ACCD;">......</span></span></code></pre></div><h3 id="_2-数据解析与处理" tabindex="-1">2. 数据解析与处理 <a class="header-anchor" href="#_2-数据解析与处理" aria-label="Permalink to &quot;2. 数据解析与处理&quot;">​</a></h3><p>解析文件，并生成<code>trainData</code>。</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> csvpath </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">./tem.csv</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> csv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">csvpath</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#C792EA;">BufferedReader</span><span style="color:#A6ACCD;"> br </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Double</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> lon </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Double</span><span style="color:#89DDFF;">&gt;(),</span></span>
<span class="line"><span style="color:#A6ACCD;">         lat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Double</span><span style="color:#89DDFF;">&gt;(),</span></span>
<span class="line"><span style="color:#A6ACCD;">         heat </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Double</span><span style="color:#89DDFF;">&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">	br </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">BufferedReader</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">FileReader</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">csv</span><span style="color:#89DDFF;">));</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> line </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">((</span><span style="color:#A6ACCD;">line </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> br</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readLine</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">!=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> lineData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> line</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">		lon</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Double</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parseDouble</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">lineData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]));</span></span>
<span class="line"><span style="color:#A6ACCD;">		lat</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Double</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parseDouble</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">lineData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]));</span></span>
<span class="line"><span style="color:#A6ACCD;">		heat</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Double</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parseDouble</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">lineData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">]));</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[][]</span><span style="color:#A6ACCD;"> trainData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">lon</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">()];</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> lon</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">size</span><span style="color:#89DDFF;">();</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">++)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">		trainData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> lon</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">		trainData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> lat</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">		trainData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> heat</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">i</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">printStackTrace</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="_3-插值计算" tabindex="-1">3. 插值计算 <a class="header-anchor" href="#_3-插值计算" aria-label="Permalink to &quot;3. 插值计算&quot;">​</a></h3><p>输入三个参数：</p><ul><li>trainData，训练数据</li><li>dataInterval，数据间隔</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> dataInterval </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[]{</span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">15</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">30</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">35</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">40</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45</span><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>size，网格大小</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> size </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">[]{</span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">};</span></span></code></pre></div><p>如下图： <img src="`+o+`" alt="等值面" data-fancybox="gallery"></p><ul><li>boundryFile，边界shp文件，一方面用于计算插值的范围，一方面如有需要，用于裁剪插值结果。 插值计算的代码如下：</li></ul><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Contour</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Global</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Border</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Global</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">PointD</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Global</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">PolyLine</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Global</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Polygon</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F78C6C;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">wContour</span><span style="color:#89DDFF;">.</span><span style="color:#C792EA;">Interpolate</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> _undefData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">9999.0</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">SimpleFeatureCollection</span><span style="color:#A6ACCD;"> polygonCollection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">PolyLine</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> cPolylineList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">PolyLine</span><span style="color:#89DDFF;">&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Polygon</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> cPolygonList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Polygon</span><span style="color:#89DDFF;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> width </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> size</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">            height </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> size</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> _X </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[]</span><span style="color:#A6ACCD;"> _Y </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">File</span><span style="color:#A6ACCD;"> file </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">File</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">boundryFile</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">ShapefileDataStore</span><span style="color:#A6ACCD;"> shpDataStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    shpDataStore </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ShapefileDataStore</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">file</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toURL</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//设置编码</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">Charset</span><span style="color:#A6ACCD;"> charset </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Charset</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forName</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GBK</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    shpDataStore</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCharset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">charset</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">String</span><span style="color:#A6ACCD;"> typeName </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> shpDataStore</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getTypeNames</span><span style="color:#89DDFF;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">SimpleFeatureSource</span><span style="color:#A6ACCD;"> featureSource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">    featureSource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> shpDataStore</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatureSource</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">typeName</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">SimpleFeatureCollection</span><span style="color:#A6ACCD;"> fc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> featureSource</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatures</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> minX </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBounds</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getMinX</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> minY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBounds</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getMinY</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> maxX </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBounds</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getMaxX</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> maxY </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getBounds</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">getMaxY</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    Interpolate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">CreateGridXY_Num</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">minX</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> minY</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> maxX</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> maxY</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _X</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _Y</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[][]</span><span style="color:#A6ACCD;"> _gridData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">double</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">][</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> nc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dataInterval</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    _gridData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Interpolate</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Interpolation_IDW_Neighbor</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">trainData</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            _X</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _Y</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">12</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _undefData</span><span style="color:#89DDFF;">);</span><span style="color:#676E95;font-style:italic;">// IDW插值</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">[][]</span><span style="color:#A6ACCD;"> S1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">_gridData</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">][</span><span style="color:#C792EA;">_gridData</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">].</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">];</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[][] S0,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[] X,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[] Y,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * int[][] S1,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double undefData</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     */</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Border</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> _borders </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Contour</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tracingBorders</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">_gridData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _X</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _Y</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            S1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _undefData</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">/**</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[][] S0,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[] X,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[] Y,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * int nc,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double[] contour,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * double undefData,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * List&lt;Border&gt; borders,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     * int[][] S1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">     */</span></span>
<span class="line"><span style="color:#A6ACCD;">    cPolylineList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Contour</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tracingContourLines</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">_gridData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _X</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _Y</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> nc</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            dataInterval</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _undefData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> _borders</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> S1</span><span style="color:#89DDFF;">);</span><span style="color:#676E95;font-style:italic;">// 生成等值线</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    cPolylineList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Contour</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">smoothLines</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">cPolylineList</span><span style="color:#89DDFF;">);</span><span style="color:#676E95;font-style:italic;">// 平滑</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    cPolygonList </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Contour</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">tracingPolygons</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">_gridData</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> cPolylineList</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            _borders</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> dataInterval</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    geojsonpogylon </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getPolygonGeoJson</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">cPolygonList</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">isclip</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        polygonCollection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> GeoJSONUtil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readGeoJsonByString</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">geojsonpogylon</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">FeatureSource</span><span style="color:#A6ACCD;"> dc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clipFeatureCollection</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">fc</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> polygonCollection</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        geojsonpogylon </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getPolygonGeoJson</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatures</span><span style="color:#89DDFF;">());</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">printStackTrace</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="_4-裁剪" tabindex="-1">4. 裁剪 <a class="header-anchor" href="#_4-裁剪" aria-label="Permalink to &quot;4. 裁剪&quot;">​</a></h3><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">FeatureSource</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">clipFeatureCollection</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">FeatureCollection</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">SimpleFeatureCollection</span><span style="color:#A6ACCD;"> gs</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">FeatureSource</span><span style="color:#A6ACCD;"> cs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">List</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> values </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">ArrayList</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#89DDFF;">&gt;&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">FeatureIterator</span><span style="color:#A6ACCD;"> contourFeatureIterator </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gs</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">features</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">FeatureIterator</span><span style="color:#A6ACCD;"> dataFeatureIterator </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> fc</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">features</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasNext</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Feature</span><span style="color:#A6ACCD;"> dataFeature </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dataFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">Geometry</span><span style="color:#A6ACCD;"> dataGeometry </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Geometry</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> dataFeature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperty</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the_geom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">getValue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">while</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">contourFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hasNext</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">Feature</span><span style="color:#A6ACCD;"> contourFeature </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> contourFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">next</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">Geometry</span><span style="color:#A6ACCD;"> contourGeometry </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Geometry</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> contourFeature</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperty</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">geometry</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">getValue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> lv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Double</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> contourFeature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperty</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lvalue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getValue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#C792EA;">double</span><span style="color:#A6ACCD;"> hv </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">Double</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> contourFeature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperty</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hvalue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getValue</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">dataGeometry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">intersects</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">contourGeometry</span><span style="color:#89DDFF;">))</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">Geometry</span><span style="color:#A6ACCD;"> geo </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> dataGeometry</span></span>
<span class="line"><span style="color:#A6ACCD;">                            </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">intersection</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">contourGeometry</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#C792EA;">Map</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> map </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">HashMap</span><span style="color:#89DDFF;">&lt;</span><span style="color:#C792EA;">String</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">Object</span><span style="color:#89DDFF;">&gt;();</span></span>
<span class="line"><span style="color:#A6ACCD;">                    map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">the_geom</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> geo</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">lvalue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> lv</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">put</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">hvalue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> hv</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                    values</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        contourFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        dataFeatureIterator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">close</span><span style="color:#89DDFF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">SimpleFeatureCollection</span><span style="color:#A6ACCD;"> sc </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">FeaureUtil</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">creatSimpleFeatureByFeilds</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">polygons</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">crs:4326,the_geom:MultiPolygon,lvalue:double,hvalue:double</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                        values</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">        cs </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> FeaureUtil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">creatFeatureSourceByCollection</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">sc</span><span style="color:#89DDFF;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">Exception</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">e</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        e</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">printStackTrace</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> cs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> cs</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>生成后的结果如下如： <img src="`+p+'" alt="等值面" data-fancybox="gallery"></p>',22),c=[t];function r(D,y,F,A,C,i){return a(),n("div",null,c)}const E=s(e,[["render",r]]);export{d as __pageData,E as default};
