import{P as n}from"./chunks/PagePreview.aeb55ba4.js";import{o as a,c as l,e as p,a as s}from"./app.cb5ee193.js";import"./chunks/PagePreview.vue_vue_type_style_index_0_scoped_4d8e7fef_lang.4ed993c7.js";const o="/lzugis-blogs/img/pg/func.png",e=s(`<h1 id="postgis" tabindex="-1">postgis <a class="header-anchor" href="#postgis" aria-hidden="true">#</a></h1><h2 id="_1-添加扩展" tabindex="-1">1. 添加扩展 <a class="header-anchor" href="#_1-添加扩展" aria-hidden="true">#</a></h2><p>扩展的添加可以通过新建数据库的时候选择空间模板，如在新建的时候没有选择空间模板，可在数据库创建完后通过如下命令添加。</p><div class="language-sql"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki"><code><span class="line"><span style="color:#F78C6C;">create</span><span style="color:#A6ACCD;"> extension postgis</span></span>
<span class="line"></span></code></pre></div><h2 id="_2-空间函数" tabindex="-1">2. 空间函数 <a class="header-anchor" href="#_2-空间函数" aria-hidden="true">#</a></h2><p>postgis中的空间函数可分为几类：几何创建、几何编辑、几何计算、坐标转换等。常见的postgis空间函数及说明如下表所示。 <img src="`+o+'" alt="" data-fancybox="gallery"></p><p>更多的可参阅其官方说明文档。</p>',7),c=s(`<h2 id="_3-矢量切片" tabindex="-1">3. 矢量切片 <a class="header-anchor" href="#_3-矢量切片" aria-hidden="true">#</a></h2><p>通过node和pg搭建一个矢量切片服务。后端工程的搭建可参考<a href="/lzugis-blogs/project/interface.html">项目-接口实现</a>的操作。核心实现代码如下：</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> pgConfig </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">../config/pgConfig</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> pg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pg</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> pool </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> pg</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Pool</span><span style="color:#A6ACCD;">(pgConfig)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> spatialMvt </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 动态矢量切片</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">getMvt</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;">next</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      x</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parseInt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      y</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parseInt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">4</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">      z</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parseInt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">req</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)[</span><span style="color:#F78C6C;">2</span><span style="color:#F07178;">])</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// layer_capital</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql1</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> </span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT ST_AsMVT(P,&#39;layer_capital&#39;,4096,&#39;geom&#39;) AS &quot;mvt&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">      FROM</span></span>
<span class="line"><span style="color:#C3E88D;">      (</span></span>
<span class="line"><span style="color:#C3E88D;">	      SELECT name, ST_AsMVTGeom(ST_Transform(geom,3857), ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4096, 64, TRUE) geom</span></span>
<span class="line"><span style="color:#C3E88D;">	      FROM &quot;layer_capital&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">        WHERE ST_Intersects(geom, ST_transform(ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4326))</span></span>
<span class="line"><span style="color:#C3E88D;">      ) AS P</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// layer_city</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql2</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> </span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT ST_AsMVT ( P,&#39;layer_pcity&#39;,4096,&#39;geom&#39; ) AS &quot;mvt&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">      FROM</span></span>
<span class="line"><span style="color:#C3E88D;">      (</span></span>
<span class="line"><span style="color:#C3E88D;">          SELECT name, ST_AsMVTGeom(ST_Transform(geom,3857), ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4096, 64, TRUE) geom</span></span>
<span class="line"><span style="color:#C3E88D;">	      FROM &quot;layer_pcity&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">        WHERE ST_Intersects(geom, ST_transform(ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4326))</span></span>
<span class="line"><span style="color:#C3E88D;">      ) AS P </span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// layer_province</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql3</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> </span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT ST_AsMVT ( P,&#39;layer_province&#39;,4096,&#39;geom&#39; ) AS &quot;mvt&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">      FROM</span></span>
<span class="line"><span style="color:#C3E88D;">      (</span></span>
<span class="line"><span style="color:#C3E88D;">        SELECT ST_AsMVTGeom(ST_Transform(geom,3857), ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4096, 64, TRUE) geom</span></span>
<span class="line"><span style="color:#C3E88D;">	      FROM &quot;layer_province&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">        WHERE ST_Intersects(geom, ST_transform(ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4326))</span></span>
<span class="line"><span style="color:#C3E88D;">      ) AS P</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// layer_bbox</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql4</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> </span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT ST_AsMVT (P, &#39;layer_bbox&#39;, 4096, &#39;geom&#39; ) AS &quot;mvt&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">      FROM</span></span>
<span class="line"><span style="color:#C3E88D;">      (</span></span>
<span class="line"><span style="color:#C3E88D;">        SELECT (cast(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> as VARCHAR)||&#39;-&#39;||cast(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> as VARCHAR)||&#39;-&#39;||cast(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;"> as VARCHAR)) as label ,</span></span>
<span class="line"><span style="color:#C3E88D;">          ST_AsMVTGeom(</span></span>
<span class="line"><span style="color:#C3E88D;">            ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">),</span></span>
<span class="line"><span style="color:#C3E88D;">            ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), </span></span>
<span class="line"><span style="color:#C3E88D;">            4096,</span></span>
<span class="line"><span style="color:#C3E88D;">            64, </span></span>
<span class="line"><span style="color:#C3E88D;">            TRUE</span></span>
<span class="line"><span style="color:#C3E88D;">          ) geom</span></span>
<span class="line"><span style="color:#C3E88D;">      ) AS P</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;">// layer_water</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">sql5</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;"> </span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT ST_AsMVT ( P,&#39;layer_water&#39;,4096,&#39;geom&#39; ) AS &quot;mvt&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">      FROM</span></span>
<span class="line"><span style="color:#C3E88D;">      (</span></span>
<span class="line"><span style="color:#C3E88D;">        SELECT ST_AsMVTGeom(ST_Transform(geom,3857), ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4096, 64, TRUE) geom</span></span>
<span class="line"><span style="color:#C3E88D;">	      FROM &quot;layer_water&quot;</span></span>
<span class="line"><span style="color:#C3E88D;">        WHERE ST_Intersects(geom, ST_transform(ST_TileEnvelope(</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">, </span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">), 4326))</span></span>
<span class="line"><span style="color:#C3E88D;">      ) AS P</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">SQL</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#C3E88D;">      SELECT (</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">sql1</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) || (</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">sql2</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) || (</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">sql3</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) || (</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">sql4</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) || (</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">sql5</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">) AS mvt</span></span>
<span class="line"><span style="color:#C3E88D;">    </span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">pool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">connect</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">isErr</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">done</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">query</span><span style="color:#F07178;">(</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">SQL</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">isErr</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">done</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">isErr</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">json</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">isErr</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rows</span><span style="color:#F07178;">[</span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mvt</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">      )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">module.exports</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> spatialMvt</span></span>
<span class="line"></span></code></pre></div>`,3),i=JSON.parse('{"title":"postgis","description":"","frontmatter":{},"headers":[{"level":2,"title":"1. 添加扩展","slug":"_1-添加扩展","link":"#_1-添加扩展","children":[]},{"level":2,"title":"2. 空间函数","slug":"_2-空间函数","link":"#_2-空间函数","children":[]},{"level":2,"title":"3. 矢量切片","slug":"_3-矢量切片","link":"#_3-矢量切片","children":[]}],"relativePath":"postgis/index.md"}'),t={name:"postgis/index.md"},E=Object.assign(t,{setup(r){return(D,y)=>(a(),l("div",null,[e,p(n,{url:"http://www.postgis.net/docs/manual-3.3/reference.html"},null,8,["url"]),c]))}});export{i as __pageData,E as default};
