import{_ as s,o as i,c as a,R as t,ad as h,ae as l,af as e,ag as k,ah as n,ai as p,aj as r,ak as o,al as d}from"./chunks/framework.QWNq-BiV.js";const f=JSON.parse('{"title":"图层导出与格式转换","description":"","frontmatter":{},"headers":[],"relativePath":"docs/basic/format.md","filePath":"docs/basic/format.md"}'),E={name:"docs/basic/format.md"},g=t('<h1 id="图层导出与格式转换" tabindex="-1">图层导出与格式转换 <a class="header-anchor" href="#图层导出与格式转换" aria-label="Permalink to &quot;图层导出与格式转换&quot;">​</a></h1><h2 id="一、矢量数据" tabindex="-1">一、矢量数据 <a class="header-anchor" href="#一、矢量数据" aria-label="Permalink to &quot;一、矢量数据&quot;">​</a></h2><h3 id="_1-矢量数据导出" tabindex="-1">1.矢量数据导出 <a class="header-anchor" href="#_1-矢量数据导出" aria-label="Permalink to &quot;1.矢量数据导出&quot;">​</a></h3><p>矢量数据导出操作在图层面板，右键<code>Export -&gt; ……</code>，选择导出方式。如下图所示，提供的导出方式有： <img src="'+h+'" alt="矢量导出" data-fancybox="gallery"></p><ul><li>Save Features As，将全部要素出；</li><li>Save Selected Features As，将选中的要素导出，需结合选择工具选中要素后方可激活；</li><li>Save As Layer Definition File，导出为图层定义文件；</li><li>Save As QGIS Layer Style File，导出为图层样式文件；</li></ul><h4 id="_1-1-导出全部-部分要素" tabindex="-1">1.1 导出全部/部分要素 <a class="header-anchor" href="#_1-1-导出全部-部分要素" aria-label="Permalink to &quot;1.1 导出全部/部分要素&quot;">​</a></h4><p>导出全部/部分要素的界面如下：</p><p><img src="'+l+'" alt="矢量导出" data-fancybox="gallery"></p><p>导出参数有：</p><ul><li><p>format： 导出格式，支持的格式如下图所示。 <img src="'+e+'" alt="矢量导出" data-fancybox="gallery"></p></li><li><p>fileName: 导出的文件路径与名称；</p></li><li><p>CRS：导出数据的投影，<strong>此处可进行数据投影的转换</strong>；</p></li><li><p>Select Fields：导出字段，可选择部分字段导出；</p></li><li><p>Geometry：导出geometry，选择默认即可；</p></li></ul><h4 id="_1-2-导出图层定义文件" tabindex="-1">1.2 导出图层定义文件 <a class="header-anchor" href="#_1-2-导出图层定义文件" aria-label="Permalink to &quot;1.2 导出图层定义文件&quot;">​</a></h4><p>图层定义文件是格式为<code>*.qlr</code>的XML文件，是对图层进行描述的文件，包括文件的存储位置、数据的四至范围、样式等。</p><h4 id="_1-3-导出图层样式文件" tabindex="-1">1.3 导出图层样式文件 <a class="header-anchor" href="#_1-3-导出图层样式文件" aria-label="Permalink to &quot;1.3 导出图层样式文件&quot;">​</a></h4><p>图层样式文件是格式为<code>*.qml</code>或<code>*.sld</code>的XML文件，存储图层的样式。</p><h3 id="_2-导出为csv" tabindex="-1">2. 导出为csv <a class="header-anchor" href="#_2-导出为csv" aria-label="Permalink to &quot;2. 导出为csv&quot;">​</a></h3><p>csv的导出是<a href="/qgis-cookbook/docs/basic/format.html#_1-1-导出全部-部分要素">导出全部/部分要素</a>部分的操作，只是导出的格式为csv，如下图所示，需要设置：1）geometry参数，根据图层的类型进行选择类型；2）Layer Options设置geometry参数为<code>as_wkt</code>、<code>as_x</code>、<code>as_y</code>或<code>as_xyz</code>。</p><p><img src="'+k+'" alt="导出csv" data-fancybox="gallery"></p><h2 id="二、栅格数据" tabindex="-1">二、栅格数据 <a class="header-anchor" href="#二、栅格数据" aria-label="Permalink to &quot;二、栅格数据&quot;">​</a></h2><p>栅格数据的导出操作与矢量数据导出操作类似，只是少了<code>Save Selected Features As</code>选项，只能全部导出。栅格数据的导出界面如下所示：</p><p><img src="'+n+'" alt="栅格导出" data-fancybox="gallery"></p><p>QGIS支持可导出的栅格数据比较多，大致如下图所示：</p><p><img src="'+p+'" alt="栅格导出格式" data-fancybox="gallery"></p><h2 id="三、导入postgis" tabindex="-1">三、导入POSTGIS <a class="header-anchor" href="#三、导入postgis" aria-label="Permalink to &quot;三、导入POSTGIS&quot;">​</a></h2><p>矢量数据导入POSTGIS有几种方式，一种是通过官方自带的界面化工具<code>PostgIS PostGIS Bundle 3 for PostgreSQL x64 12 Shapefile and DBF Loader Exporter</code>，一种是通过 <code>shp2pgsql</code>命令行工具，另一种是通过QGIS进行矢量数据导入。通过QGIS导入的方式有以下两种。</p><h3 id="_1-导出为sql文件" tabindex="-1">1. 导出为SQL文件 <a class="header-anchor" href="#_1-导出为sql文件" aria-label="Permalink to &quot;1. 导出为SQL文件&quot;">​</a></h3><p>导出为SQL文件是<a href="/qgis-cookbook/docs/basic/format.html#_1-1-导出全部-部分要素">导出全部/部分要素</a>部分的操作，只是导出的格式为<code>PostgresSQL SQL dump</code>，如下图所示。</p><p><img src="'+r+`" alt="导出SQL文件" data-fancybox="gallery"></p><p>生成的SQL文件通过<code>WKB</code>记录geometry字段值，内容如下：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> standard_conforming_strings </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> OFF</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">DELETE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> FROM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> geometry_columns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">WHERE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f_table_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;sql&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> AND</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f_table_schema </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">BEGIN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot;.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ( </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ogc_fid&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> SERIAL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CONSTRAINT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;sql_pk&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> PRIMARY KEY</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ogc_fid&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) );</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">SELECT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> AddGeometryColumn(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;public&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sql&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wkb_geometry&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4326</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;POINT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">CREATE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> INDEX</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sql_wkb_geometry_geom_idx</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&quot; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> USING</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> GIST (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wkb_geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ALTER</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> TABLE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ADD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> COLUMN </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> VARCHAR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">INSERT INTO</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sql&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wkb_geometry&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">VALUES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0101000020E6100000747E0F7CDEE45540D2E399F41FE44540&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;乌鲁木齐&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="_2-工具箱导入" tabindex="-1">2. 工具箱导入 <a class="header-anchor" href="#_2-工具箱导入" aria-label="Permalink to &quot;2. 工具箱导入&quot;">​</a></h3><p>可通过<code>Database -&gt; Export to PostgresSQL</code>工具箱导入矢量数据，如下图所示。</p><p><img src="`+o+'" alt="导出SQL文件" data-fancybox="gallery"></p><p>导入的界面和参数如下图。 <img src="'+d+'" alt="导出SQL文件" data-fancybox="gallery"></p>',33),c=[g];function y(F,_,u,m,q,b){return i(),a("div",null,c)}const S=s(E,[["render",y]]);export{f as __pageData,S as default};
