import{_ as s,o as a,c as i,R as n,aR as t,aS as e,aT as l,aU as p,aV as h,aW as r,aX as k,aY as E,aZ as d,a_ as g,a$ as c,b0 as o,b1 as y,b2 as F}from"./chunks/framework.QWNq-BiV.js";const T=JSON.parse('{"title":"QGIS开发教程","description":"","frontmatter":{},"headers":[],"relativePath":"docs/senior/dev.md","filePath":"docs/senior/dev.md"}'),u={name:"docs/senior/dev.md"},P=n('<h1 id="qgis开发教程" tabindex="-1">QGIS开发教程 <a class="header-anchor" href="#qgis开发教程" aria-label="Permalink to &quot;QGIS开发教程&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">说明</p><p>QGIS二次开发的方式包括：Python命令行、代码编辑器和Python脚本等。</p></div><h2 id="一、python命令行" tabindex="-1">一、Python命令行 <a class="header-anchor" href="#一、python命令行" aria-label="Permalink to &quot;一、Python命令行&quot;">​</a></h2><p><img src="'+t+`" alt="Python命令行" data-fancybox="gallery"></p><p><code>Python Console</code>面板可分为：1.顶部工具栏；2.控制台；3.命令输入窗口。下面以调用<code>Buffer</code>为例，说明一下<code>Python Console</code>的使用。</p><h3 id="_1-查看帮助文档" tabindex="-1">1. 查看帮助文档 <a class="header-anchor" href="#_1-查看帮助文档" aria-label="Permalink to &quot;1. 查看帮助文档&quot;">​</a></h3><p>在顶部工具栏点击<code>Help</code>按钮，即可查看相关的帮助文档，相关的帮助文档有：</p><ul><li><strong>python_console</strong>: <a href="https://docs.qgis.org/3.16/en/docs/user_manual/plugins/python_console.html" target="_blank" rel="noreferrer">https://docs.qgis.org/3.16/en/docs/user_manual/plugins/python_console.html</a></li><li><strong>QGIS Python API</strong>：<a href="https://qgis.org/pyqgis/3.16/" target="_blank" rel="noreferrer">https://qgis.org/pyqgis/3.16/</a></li><li><strong>pyqgis_developer_cookbook</strong>：<a href="https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/index.html" target="_blank" rel="noreferrer">https://docs.qgis.org/3.16/en/docs/pyqgis_developer_cookbook/index.html</a></li></ul><h3 id="_1-引入依赖" tabindex="-1">1. 引入依赖 <a class="header-anchor" href="#_1-引入依赖" aria-label="Permalink to &quot;1. 引入依赖&quot;">​</a></h3><p>在命令行中使用<code>Processing</code>需要先输入代码<code>from qgis import processing</code>引入依赖。</p><h3 id="_2-查看所有可用工具" tabindex="-1">2. 查看所有可用工具 <a class="header-anchor" href="#_2-查看所有可用工具" aria-label="Permalink to &quot;2. 查看所有可用工具&quot;">​</a></h3><p>可在命令行中输入如下代码查看所有可用工具。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsApplication.processingRegistry().algorithms():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(alg.id(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;-&gt;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, alg.displayName())</span></span></code></pre></div><p>运行后结果如下。</p><p><img src="`+e+`" alt="list-tools" data-fancybox="gallery"></p><h3 id="_3-查看帮助" tabindex="-1">3. 查看帮助 <a class="header-anchor" href="#_3-查看帮助" aria-label="Permalink to &quot;3. 查看帮助&quot;">​</a></h3><p>在命令行中输入<code>processing.algorithmHelp(&quot;native:buffer&quot;)</code>可查看<code>Buffer</code>的详细帮助，输出内容如下。</p><div class="language-txt vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>This algorithm computes a buffer area for all the features in an input layer, using a fixed or dynamic distance.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The segments parameter controls the number of line segments to use to approximate a quarter circle when creating rounded offsets.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The end cap style parameter controls how line endings are handled in the buffer.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The join style parameter specifies whether round, miter or beveled joins should be used when offsetting corners in a line.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The miter limit parameter is only applicable for miter join styles, and controls the maximum distance from the offset curve to use when creating a mitered join.</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>----------------</span></span>
<span class="line"><span>Input parameters</span></span>
<span class="line"><span>----------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>INPUT: Input layer</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterFeatureSource</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- str: layer ID</span></span>
<span class="line"><span>		- str: layer name</span></span>
<span class="line"><span>		- str: layer source</span></span>
<span class="line"><span>		- QgsProcessingFeatureSourceDefinition</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span>		- QgsVectorLayer</span></span>
<span class="line"><span></span></span>
<span class="line"><span>DISTANCE: Distance</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterDistance</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- float</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>SEGMENTS: Segments</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	The segments parameter controls the number of line segments to use to approximate a quarter circle when creating rounded offsets.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterNumber</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- float</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>END_CAP_STYLE: End cap style</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterEnum</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Available values:</span></span>
<span class="line"><span>		- 0: Round</span></span>
<span class="line"><span>		- 1: Flat</span></span>
<span class="line"><span>		- 2: Square</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- str: as string representation of int, e.g. &#39;1&#39;</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>JOIN_STYLE: Join style</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterEnum</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Available values:</span></span>
<span class="line"><span>		- 0: Round</span></span>
<span class="line"><span>		- 1: Miter</span></span>
<span class="line"><span>		- 2: Bevel</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- str: as string representation of int, e.g. &#39;1&#39;</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MITER_LIMIT: Miter limit</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterNumber</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- float</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>DISSOLVE: Dissolve result</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterBoolean</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- bool</span></span>
<span class="line"><span>		- int</span></span>
<span class="line"><span>		- str</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>OUTPUT: Buffered</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Parameter type:	QgsProcessingParameterFeatureSink</span></span>
<span class="line"><span></span></span>
<span class="line"><span>	Accepted data types:</span></span>
<span class="line"><span>		- str: destination vector file, e.g. &#39;d:/test.shp&#39;</span></span>
<span class="line"><span>		- str: &#39;memory:&#39; to store result in temporary memory layer</span></span>
<span class="line"><span>		- str: using vector provider ID prefix and destination URI, e.g. &#39;postgres:…&#39; to store result in PostGIS table</span></span>
<span class="line"><span>		- QgsProcessingOutputLayerDefinition</span></span>
<span class="line"><span>		- QgsProperty</span></span>
<span class="line"><span></span></span>
<span class="line"><span>----------------</span></span>
<span class="line"><span>Outputs</span></span>
<span class="line"><span>----------------</span></span>
<span class="line"><span></span></span>
<span class="line"><span>OUTPUT:  &lt;QgsProcessingOutputVectorLayer&gt;</span></span>
<span class="line"><span>	Buffered</span></span></code></pre></div><h3 id="_4-输入数据" tabindex="-1">4. 输入数据 <a class="header-anchor" href="#_4-输入数据" aria-label="Permalink to &quot;4. 输入数据&quot;">​</a></h3><p>在<code>Buffer</code>工具中，需要一个数据或者图层作为输入，我们可以通过如下方式指定输入数据。</p><ul><li>指定数据文件，<code>layer = &#39;D:/桌面/capital.geojson&#39;</code></li><li>界面中当前选择的图层，<code>layer = mc.currentLayer()</code></li><li>界面中的图层，<code>layer = mc.layer(0)</code></li></ul><p><strong>说明</strong>：<code>mc</code>的定义如下代码所示。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mc </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iface.mapCanvas()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> lyr </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mc.layers():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(lyr.name())</span></span></code></pre></div><h3 id="_5-无界面运行" tabindex="-1">5. 无界面运行 <a class="header-anchor" href="#_5-无界面运行" aria-label="Permalink to &quot;5. 无界面运行&quot;">​</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 计算缓冲区</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:buffer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital-buffer.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h3 id="_6-有界面运行" tabindex="-1">6. 有界面运行 <a class="header-anchor" href="#_6-有界面运行" aria-label="Permalink to &quot;6. 有界面运行&quot;">​</a></h3><p>可通过如下命令创建一个可交互的对话框，并打开对话框。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_dialog </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing.createAlgorithmDialog(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:buffer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital-buffer.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">my_dialog.show()</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span></code></pre></div><p><img src="`+l+`" alt="buffer-dialog" data-fancybox="gallery"></p><p>也可通过如下代码直接代开可交互的对话框。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建对话框并立即打开</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processing.execAlgorithmDialog(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:buffer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital-buffer.shp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span></code></pre></div><h2 id="二、代码编辑器" tabindex="-1">二、代码编辑器 <a class="header-anchor" href="#二、代码编辑器" aria-label="Permalink to &quot;二、代码编辑器&quot;">​</a></h2><p>点击<code>Python Console</code>工具栏<code>Show Editor</code>即可打开代码编辑器，如下图所示。 <img src="`+p+`" alt="code-editor" data-fancybox="gallery"></p><p>代码编辑器界面分为顶部工具栏和代码编辑区域，在编辑器中可编辑脚本，编辑完成后，点击<code>Run</code>按钮即可运行。</p><h3 id="_1-查看图层属性" tabindex="-1">1. 查看图层属性 <a class="header-anchor" href="#_1-查看图层属性" aria-label="Permalink to &quot;1. 查看图层属性&quot;">​</a></h3><p>通过如下代码可打开数据并查看数据属性。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/layer-capital.shp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsVectorLayer(path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;layer-capital&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ogr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feature </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vlayer.getFeatures():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (feature[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-----------------&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><img src="`+h+`" alt="code1" data-fancybox="gallery"></p><h3 id="_2-多工具运行" tabindex="-1">2. 多工具运行 <a class="header-anchor" href="#_2-多工具运行" aria-label="Permalink to &quot;2. 多工具运行&quot;">​</a></h3><p>如下代码演示了如何运行多个工具。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 计算缓冲区并计算clip结果</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;layer-capital.shp&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">input2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;layer-college.shp&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output1 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;capital-buffer.shp&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output2 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;college-buffer.shp&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">output3 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;clip-result.shp&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:buffer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: input1, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:buffer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: input2, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;native:clip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output1, </span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;OVERLAY&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output2,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: output3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;计算完成！&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">;</span></span></code></pre></div><p><img src="`+r+`" alt="run-result" data-fancybox="gallery"></p><h3 id="_3-打开文件" tabindex="-1">3. 打开文件 <a class="header-anchor" href="#_3-打开文件" aria-label="Permalink to &quot;3. 打开文件&quot;">​</a></h3><p>如下代码演示了不同格式的文件的打开方式。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 打开数据</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># get the path to the shapefile</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path_to_airports_layer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;E:\\my\\qgis-lecture\\data\\layer-capital.shp&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsVectorLayer(path_to_airports_layer, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;layer-capital&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ogr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># get the path to the gpkg</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path_to_gpkg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(QgsApplication.pkgDataPath(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;resources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;world_map.gpkg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># append the layername part</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">gpkg_countries_layer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path_to_gpkg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;|layername=countries&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iface.addVectorLayer(gpkg_countries_layer , </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;countries&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ogr&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># POSTGIS</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsDataSourceUri()</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># set host name, port, database name, username and password</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uri.setConnection(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;localhost&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;5432&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dbname&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;johny&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xxx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># set database schema, table name, geometry column and optionally</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># subset (WHERE clause)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uri.setDataSource(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;public&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;roads&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;the_geom&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cityid = 2643&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;primary_key_field&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsVectorLayer(uri.uri(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;layer name you like&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;postgres&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CSV</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uri </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;file://</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/testdata/delimited_xy.csv?delimiter=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&amp;xField=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&amp;yField=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.format(os.getcwd(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;x&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;y&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsVectorLayer(uri, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;layer name you like&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;delimitedtext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># raster</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path_to_tif </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;qgis-projects/python_cookbook/data/srtm.tif&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsRasterLayer(path_to_tif, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SRTM layer name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vlayer.isValid():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Layer failed to load!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QgsProject.instance().addMapLayer(vlayer)</span></span></code></pre></div><p>如下代码展示了如何打开tif。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;D:/lzugis23/proj/qgis培训/code/qgis-lecture/data/&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path_to_tif </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dem.tif&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">rlayer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsRasterLayer(path_to_tif, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> rlayer.isValid():</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Layer failed to load!&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    QgsProject.instance().addMapLayer(rlayer)</span></span></code></pre></div><p><img src="`+k+'" alt="raster-file" data-fancybox="gallery"></p><h2 id="三、python脚本文件" tabindex="-1">三、Python脚本文件 <a class="header-anchor" href="#三、python脚本文件" aria-label="Permalink to &quot;三、Python脚本文件&quot;">​</a></h2><h3 id="_1-创建脚本" tabindex="-1">1. 创建脚本 <a class="header-anchor" href="#_1-创建脚本" aria-label="Permalink to &quot;1. 创建脚本&quot;">​</a></h3><p>在工具箱顶部，点击“Python脚本”按钮，点击<code>Create New Script...</code>可创建一个新的Python脚本文件，打开后弹出代码编辑界面。</p><p><img src="'+E+'" alt="new-script" data-fancybox="gallery"></p><p>点击<code>Create New Script from Template...</code>可创建一个新的Python脚本模板文件，打开后弹出代码编辑界面，编辑器中会自动填入一些初始化的脚本。</p><p><img src="'+d+`" alt="new-script-template" data-fancybox="gallery"></p><p>如下代码展示了在脚本中计算缓冲区并将结果栅格化。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis.PyQt.QtCore </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QCoreApplication</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis.core </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (QgsProcessing,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingAlgorithm,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingException,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingOutputNumber,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingParameterDistance,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingParameterFeatureSource,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingParameterVectorDestination,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       QgsProcessingParameterRasterDestination)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ExampleProcessingAlgorithm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">QgsProcessingAlgorithm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    This is an example algorithm that takes a vector layer,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    creates some new layers and returns some results.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, string):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns a translatable string with the self.tr() function.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QCoreApplication.translate(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Processing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, string)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createInstance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Must return a new copy of your algorithm.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ExampleProcessingAlgorithm()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns the unique algorithm name.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;bufferrasterextend&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> displayName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns the translated algorithm name.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲计算并栅格化结果&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> group</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns the name of the group this algorithm belongs to.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My Script&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns the unique ID of the group this algorithm belongs</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        to.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;myscripts&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shortHelpString</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Returns a localised short help string for the algorithm.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;先进行缓冲区计算，在将结果转换为栅格展示。&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initAlgorithm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Here we define the inputs and outputs of the algorithm.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # &#39;INPUT&#39; is the recommended name for the main input</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # parameter.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingParameterFeatureSource(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输入矢量数据&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[QgsProcessing.TypeVectorAnyGeometry]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingParameterVectorDestination(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输出缓冲区计算结果&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # &#39;OUTPUT&#39; is the recommended name for the main output</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # parameter.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingParameterRasterDestination(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输出栅格文件&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingParameterDistance(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;BUFFERDIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲区半径&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                defaultValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # Make distance units match the INPUT layer units:</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                parentParameterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingParameterDistance(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;CELLSIZE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;单元格大小&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                defaultValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                parentParameterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addOutput(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            QgsProcessingOutputNumber(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Number of features processed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> processAlgorithm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, parameters, context, feedback):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Here is where the processing itself takes place.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # First, we get the count of features from the INPUT layer.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # This layer is defined as a QgsProcessingParameterFeatureSource</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # parameter, so it is retrieved by calling</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # self.parameterAsSource.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        input_featuresource </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parameterAsSource(parameters,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                                     &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                     context)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        numfeatures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> input_featuresource.featureCount()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Retrieve the buffer distance and raster cell size numeric</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # values. Since these are numeric values, they are retrieved</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # using self.parameterAsDouble.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        bufferdist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parameterAsDouble(parameters, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFERDIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            context)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rastercellsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.parameterAsDouble(parameters, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CELLSIZE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                context)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        buffer_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing.run(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;native:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # Here we pass on the original parameter values of INPUT</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # and BUFFER_OUTPUT to the buffer algorithm.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bufferdist,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Because the buffer algorithm is being run as a step in</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # another larger algorithm, the is_child_algorithm option</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # should be set to True</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            is_child_algorithm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            #</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # It&#39;s important to pass on the context and feedback objects to</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # child algorithms, so that they can properly give feedback to</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # users and handle cancelation requests.</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            feedback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">feedback)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Check for cancelation</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Run the separate rasterization algorithm using the buffer result</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # as an input.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        rasterized_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing.run(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;qgis:rasterize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # Here we pass the &#39;OUTPUT&#39; value from the buffer&#39;s result</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # dictionary off to the rasterize child algorithm.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;LAYER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;EXTENT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;MAP_UNITS_PER_PIXEL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rastercellsize,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # Use the original parameter value.</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            is_child_algorithm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            feedback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">feedback)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Return the results</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rasterized_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: numfeatures}</span></span></code></pre></div><p>点击“Run”按钮，运行该算法，打开如下界面。</p><p><img src="`+g+'" alt="run-script" data-fancybox="gallery"></p><h3 id="_2-标准函数" tabindex="-1">2. 标准函数 <a class="header-anchor" href="#_2-标准函数" aria-label="Permalink to &quot;2. 标准函数&quot;">​</a></h3><p>如上代码所示，脚本中的标准函数及说明如下：</p><ul><li><strong>createInstance (必须)</strong></li></ul><p>如下图所示，必须返回一个算法新实例。如果更改了类的名称，请确保在此处返回的值与类名称匹配！</p><p><img src="'+c+'" alt="create-instance" data-fancybox="gallery"></p><ul><li><strong>name (必须)</strong></li></ul><p>返回一个用来标识算法的名称。</p><ul><li><strong>displayName (必须)</strong></li></ul><p>如下图所示，返回在界面上展示的算法的名称。</p><p><img src="'+o+'" alt="displayname" data-fancybox="gallery"></p><ul><li><strong>group</strong></li></ul><p>如下图所示，返回该算法所属的组。</p><p><img src="'+y+`" alt="group" data-fancybox="gallery"></p><ul><li><strong>groupId</strong></li></ul><p>返回算法的唯一分组ID。</p><ul><li><strong>shortHelpString</strong></li></ul><p>返回算法的简单说明与操作帮助。</p><ul><li><strong>initAlgorithm (必须)</strong></li></ul><p>如下代码所示，在此处定义算法的输入与输出。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initAlgorithm</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, config</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &#39;INPUT&#39; is the recommended name for the main input</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # parameter.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingParameterFeatureSource(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输入矢量数据&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            types</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[QgsProcessing.TypeVectorAnyGeometry]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingParameterVectorDestination(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输出缓冲区计算结果&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # &#39;OUTPUT&#39; is the recommended name for the main output</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # parameter.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingParameterRasterDestination(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输出栅格文件&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingParameterDistance(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;BUFFERDIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲区半径&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            defaultValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # Make distance units match the INPUT layer units:</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            parentParameterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addParameter(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingParameterDistance(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;CELLSIZE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;单元格大小&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            defaultValue</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            parentParameterName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.addOutput(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        QgsProcessingOutputNumber(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.tr(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Number of features processed&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span></code></pre></div><ul><li><strong>processAlgorithm (必须)</strong> 定义算法执行逻辑。调用<code>processing.run</code>执行工具箱，最后返回输出与结果。</li></ul><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rasterized_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: numfeatures</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>执行后结果如下所示：</p><p><img src="`+F+`" alt="script-run" data-fancybox="gallery"></p><h3 id="_3-alg装饰器" tabindex="-1">3. @alg装饰器 <a class="header-anchor" href="#_3-alg装饰器" aria-label="Permalink to &quot;3. @alg装饰器&quot;">​</a></h3><p>如下代码演示了如何使用<code>@alg装饰器</code>编写脚本文件。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis.processing </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> alg</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> qgis.core </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> QgsProject</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bufferrasteralg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲区计算并栅格化输出结果&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">     group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myscripts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">group_label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;My scripts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &#39;INPUT&#39; is the recommended name for the main input parameter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOURCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;输入矢量图层&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RASTER_LAYER_DEST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;栅格图层输出&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">VECTOR_LAYER_DEST</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲结果输出&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DISTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFERDIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;缓冲距离&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.input</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DISTANCE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CELLSIZE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;栅格单元格大小&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># &#39;OUTPUT&#39; is the recommended name for the main output parameter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">@alg.output</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alg.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NUMBER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">label</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;要素数量&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bufferrasteralg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(instance, parameters, context, feedback, inputs):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    先进行缓冲区计算，在将结果转换为栅格展示。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    input_featuresource </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance.parameterAsSource(parameters,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                                     &#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, context)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    numfeatures </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> input_featuresource.featureCount()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bufferdist </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance.parameterAsDouble(parameters, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFERDIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                            context)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rastercellsize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance.parameterAsDouble(parameters, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CELLSIZE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                                context)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    buffer_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;native:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                               {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;DISTANCE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bufferdist,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;SEGMENTS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;DISSOLVE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;END_CAP_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;JOIN_STYLE&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;MITER_LIMIT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                               is_child_algorithm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                               context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                               feedback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">feedback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    rasterized_result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> processing.run(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;qgis:rasterize&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                               {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;LAYER&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;EXTENT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;MAP_UNITS_PER_PIXEL&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rastercellsize,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                                &#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parameters[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                               },</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                               is_child_algorithm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                               feedback</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">feedback)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> feedback.isCanceled():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: rasterized_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;BUFFER_OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: buffer_result[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;OUTPUT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &#39;NUMBEROFFEATURES&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: numfeatures}</span></span></code></pre></div><h4 id="输入类型" tabindex="-1">输入类型 <a class="header-anchor" href="#输入类型" aria-label="Permalink to &quot;输入类型&quot;">​</a></h4><table class="colwidths-given longtable docutils align-default"><colgroup><col style="width:45%;"><col style="width:31%;"><col style="width:24%;"></colgroup><thead><tr class="row-odd"><th class="head"><p>Class</p></th><th class="head"><p>Alg constant</p></th><th class="head"><p>Description</p></th></tr></thead><tbody><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterAnnotationLayer.html#qgis.core.QgsProcessingParameterAnnotationLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterAnnotationLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.ANNOTATION_LAYER</span></code></p></td><td><p>An annotation layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterAuthConfig.html#qgis.core.QgsProcessingParameterAuthConfig" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterAuthConfig</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.AUTH_CFG</span></code></p></td><td><p>Allows users to select from available authentication configurations or create new authentication configurations</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterBand.html#qgis.core.QgsProcessingParameterBand" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterBand</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.BAND</span></code></p></td><td><p>A band of a raster layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterBoolean.html#qgis.core.QgsProcessingParameterBoolean" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterBoolean</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.BOOL</span></code></p></td><td><p>A boolean value</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterColor.html#qgis.core.QgsProcessingParameterColor" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterColor</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.COLOR</span></code></p></td><td><p>A color</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterCoordinateOperation.html#qgis.core.QgsProcessingParameterCoordinateOperation" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterCoordinateOperation</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.COORDINATE_OPERATION</span></code></p></td><td><p>A coordinate operation (for CRS transformations)</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterCrs.html#qgis.core.QgsProcessingParameterCrs" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterCrs</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.CRS</span></code></p></td><td><p>A Coordinate Reference System</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterDatabaseSchema.html#qgis.core.QgsProcessingParameterDatabaseSchema" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterDatabaseSchema</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.DATABASE_SCHEMA</span></code></p></td><td><p>A database schema</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterDatabaseTable.html#qgis.core.QgsProcessingParameterDatabaseTable" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterDatabaseTable</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.DATABASE_TABLE</span></code></p></td><td><p>A database table</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterDateTime.html#qgis.core.QgsProcessingParameterDateTime" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterDateTime</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.DATETIME</span></code></p></td><td><p>A datetime (or a pure date or time)</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterDistance.html#qgis.core.QgsProcessingParameterDistance" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterDistance</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.DISTANCE</span></code></p></td><td><p>A double numeric parameter for distance values</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterEnum.html#qgis.core.QgsProcessingParameterEnum" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterEnum</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.ENUM</span></code></p></td><td><p>An enumeration, allowing for selection from a set of predefined values</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterExpression.html#qgis.core.QgsProcessingParameterExpression" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterExpression</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.EXPRESSION</span></code></p></td><td><p>An expression</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterExtent.html#qgis.core.QgsProcessingParameterExtent" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterExtent</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.EXTENT</span></code></p></td><td><p>A spatial extent defined by xmin, xmax, ymin, ymax</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterField.html#qgis.core.QgsProcessingParameterField" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterField</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FIELD</span></code></p></td><td><p>A field in the attribute table of a vector layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterFile.html#qgis.core.QgsProcessingParameterFile" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterFile</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FILE</span></code></p></td><td><p>A filename of an existing file</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterFileDestination.html#qgis.core.QgsProcessingParameterFileDestination" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterFileDestination</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FILE_DEST</span></code></p></td><td><p>A filename for a newly created output file</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterFolderDestination.html#qgis.core.QgsProcessingParameterFolderDestination" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterFolderDestination</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FOLDER_DEST</span></code></p></td><td><p>A folder (destination folder)</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterGeometry.html#qgis.core.QgsProcessingParameterGeometry" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterGeometry</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.GEOMETRY</span></code></p></td><td><p>A geometry</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterNumber.html#qgis.core.QgsProcessingParameterNumber" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterNumber</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.INT</span></code></p></td><td><p>An integer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterLayout.html#qgis.core.QgsProcessingParameterLayout" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterLayout</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.LAYOUT</span></code></p></td><td><p>A layout</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterLayoutItem.html#qgis.core.QgsProcessingParameterLayoutItem" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterLayoutItem</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.LAYOUT_ITEM</span></code></p></td><td><p>A layout item</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterMapLayer.html#qgis.core.QgsProcessingParameterMapLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterMapLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MAPLAYER</span></code></p></td><td><p>A map layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterMapTheme.html#qgis.core.QgsProcessingParameterMapTheme" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterMapTheme</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MAP_THEME</span></code></p></td><td><p>A project map theme</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterMatrix.html#qgis.core.QgsProcessingParameterMatrix" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterMatrix</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MATRIX</span></code></p></td><td><p>A matrix</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterMeshLayer.html#qgis.core.QgsProcessingParameterMeshLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterMeshLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MESH_LAYER</span></code></p></td><td><p>A mesh layer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterMultipleLayers.html#qgis.core.QgsProcessingParameterMultipleLayers" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterMultipleLayers</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MULTILAYER</span></code></p></td><td><p>A set of layers</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterNumber.html#qgis.core.QgsProcessingParameterNumber" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterNumber</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.NUMBER</span></code></p></td><td><p>A numerical value</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterPoint.html#qgis.core.QgsProcessingParameterPoint" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterPoint</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.POINT</span></code></p></td><td><p>A point</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterPointCloudLayer.html#qgis.core.QgsProcessingParameterPointCloudLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterPointCloudLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.POINT_CLOUD_LAYER</span></code></p></td><td><p>A point cloud layer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterProviderConnection.html#qgis.core.QgsProcessingParameterProviderConnection" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterProviderConnection</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.PROVIDER_CONNECTION</span></code></p></td><td><p>An available connection for a database provider</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterRange.html#qgis.core.QgsProcessingParameterRange" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterRange</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.RANGE</span></code></p></td><td><p>A number range</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterRasterLayer.html#qgis.core.QgsProcessingParameterRasterLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterRasterLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.RASTER_LAYER</span></code></p></td><td><p>A raster layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterRasterDestination.html#qgis.core.QgsProcessingParameterRasterDestination" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterRasterDestination</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.RASTER_LAYER_DEST</span></code></p></td><td><p>A raster layer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterScale.html#qgis.core.QgsProcessingParameterScale" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterScale</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.SCALE</span></code></p></td><td><p>A map scale</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterFeatureSink.html#qgis.core.QgsProcessingParameterFeatureSink" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterFeatureSink</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.SINK</span></code></p></td><td><p>A feature sink</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterFeatureSource.html#qgis.core.QgsProcessingParameterFeatureSource" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterFeatureSource</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.SOURCE</span></code></p></td><td><p>A feature source</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterString.html#qgis.core.QgsProcessingParameterString" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterString</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.STRING</span></code></p></td><td><p>A text string</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterVectorLayer.html#qgis.core.QgsProcessingParameterVectorLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterVectorLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.VECTOR_LAYER</span></code></p></td><td><p>A vector layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingParameterVectorDestination.html#qgis.core.QgsProcessingParameterVectorDestination" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingParameterVectorDestination</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.VECTOR_LAYER_DEST</span></code></p></td><td><p>A vector layer</p></td></tr></tbody></table><h4 id="输出类型" tabindex="-1">输出类型 <a class="header-anchor" href="#输出类型" aria-label="Permalink to &quot;输出类型&quot;">​</a></h4><table class="colwidths-given longtable docutils align-default"><colgroup><col style="width:47%;"><col style="width:24%;"><col style="width:29%;"></colgroup><thead><tr class="row-odd"><th class="head"><p>Class</p></th><th class="head"><p>Alg constant</p></th><th class="head"><p>Description</p></th></tr></thead><tbody><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputBoolean.html#qgis.core.QgsProcessingOutputBoolean" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputBoolean</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.BOOL</span></code></p></td><td><p>A boolean value</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputNumber.html#qgis.core.QgsProcessingOutputNumber" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputNumber</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.DISTANCE</span></code></p></td><td><p>A double numeric parameter for distance values</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputFile.html#qgis.core.QgsProcessingOutputFile" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputFile</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FILE</span></code></p></td><td><p>A filename of an existing file</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputFolder.html#qgis.core.QgsProcessingOutputFolder" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputFolder</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.FOLDER</span></code></p></td><td><p>A folder</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputHtml.html#qgis.core.QgsProcessingOutputHtml" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputHtml</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.HTML</span></code></p></td><td><p>HTML</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputNumber.html#qgis.core.QgsProcessingOutputNumber" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputNumber</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.INT</span></code></p></td><td><p>A integer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputLayerDefinition.html#qgis.core.QgsProcessingOutputLayerDefinition" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputLayerDefinition</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.LAYERDEF</span></code></p></td><td><p>A layer definition</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputMapLayer.html#qgis.core.QgsProcessingOutputMapLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputMapLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MAPLAYER</span></code></p></td><td><p>A map layer</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputMultipleLayers.html#qgis.core.QgsProcessingOutputMultipleLayers" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputMultipleLayers</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.MULTILAYER</span></code></p></td><td><p>A set of layers</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputNumber.html#qgis.core.QgsProcessingOutputNumber" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputNumber</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.NUMBER</span></code></p></td><td><p>A numerical value</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputRasterLayer.html#qgis.core.QgsProcessingOutputRasterLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputRasterLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.RASTER_LAYER</span></code></p></td><td><p>A raster layer</p></td></tr><tr class="row-odd"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputString.html#qgis.core.QgsProcessingOutputString" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputString</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.STRING</span></code></p></td><td><p>A text string</p></td></tr><tr class="row-even"><td><p><a class="reference external" href="https://qgis.org/pyqgis/3.22/core/QgsProcessingOutputVectorLayer.html#qgis.core.QgsProcessingOutputVectorLayer" title="(in QGIS Python API v3.22)"><code class="xref py py-class docutils literal notranslate"><span class="pre">QgsProcessingOutputVectorLayer</span></code></a></p></td><td><p><code class="docutils literal notranslate"><span class="pre">alg.VECTOR_LAYER</span></code></p></td><td><p>A vector layer</p></td></tr></tbody></table>`,89),m=[P];function C(A,f,B,q,D,Q){return a(),i("div",null,m)}const I=s(u,[["render",C]]);export{T as __pageData,I as default};
